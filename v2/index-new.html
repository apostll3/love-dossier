<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Dossier - 32 Types for Your Loved One</title>
    <meta name="description" content="Love Dossier - Complete relationship management PWA with 32 specialized types. Private, offline-first, 100% free. Organize everything about your loved one.">
    <meta name="keywords" content="relationship, love, dossier, PWA, offline, private, couples, memories">
    <meta name="author" content="Love Dossier">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Love Dossier">
    <link rel="icon" href="LoveDossier.ico">
    <link rel="apple-touch-icon" href="LoveDossier.ico">
    
    <style>
        /* ============================================
           COLOR THEMES SYSTEM
           ============================================ */
        
        /* Default Theme - Purple Gradient */
        :root {
            --primary: #667eea;
            --primary-dark: #5568d3;
            --secondary: #764ba2;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            
            --bg: #f8f9fa;
            --card-bg: #ffffff;
            --text: #1f2937;
            --text-secondary: #6b7280;
            --border: #e5e7eb;
            
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            
            --radius: 12px;
            --radius-sm: 8px;
        }
        
        /* Dark Mode */
        [data-theme="dark"] {
            --bg: #111827;
            --card-bg: #1f2937;
            --text: #f9fafb;
            --text-secondary: #9ca3af;
            --border: #374151;
        }
        
        /* Pink Love Theme */
        [data-color-theme="pink"] {
            --primary: #ec4899;
            --primary-dark: #db2777;
            --secondary: #f472b6;
        }
        
        /* Ocean Blue Theme */
        [data-color-theme="ocean"] {
            --primary: #0ea5e9;
            --primary-dark: #0284c7;
            --secondary: #38bdf8;
        }
        
        /* Sunset Orange Theme */
        [data-color-theme="sunset"] {
            --primary: #f97316;
            --primary-dark: #ea580c;
            --secondary: #fb923c;
        }
        
        /* Forest Green Theme */
        [data-color-theme="forest"] {
            --primary: #10b981;
            --primary-dark: #059669;
            --secondary: #34d399;
        }
        
        /* Royal Purple (default) */
        [data-color-theme="purple"] {
            --primary: #667eea;
            --primary-dark: #5568d3;
            --secondary: #764ba2;
        }
        
        /* Romantic Theme */
        [data-color-theme="romantic"] {
            --primary: #ef4444;
            --primary-dark: #dc2626;
            --secondary: #f87171;
        }
        
        /* Mint Theme */
        [data-color-theme="mint"] {
            --primary: #14b8a6;
            --primary-dark: #0d9488;
            --secondary: #5eead4;
        }
        
        /* Lavender Theme */
        [data-color-theme="lavender"] {
            --primary: #a855f7;
            --primary-dark: #9333ea;
            --secondary: #c084fc;
        }
        
        /* Gold Theme */
        [data-color-theme="gold"] {
            --primary: #eab308;
            --primary-dark: #ca8a04;
            --secondary: #fbbf24;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* SVG Global Styles */
        svg {
            display: inline-block;
            vertical-align: middle;
        }
        
        svg path,
        svg circle,
        svg rect,
        svg polygon {
            transition: fill 0.2s ease, stroke 0.2s ease;
        }
        
        /* Приховати scrollbar для всіх браузерів */
        * {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }
        
        *::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            transition: background 0.3s ease, color 0.3s ease;
        }
        
        /* Header - Compact */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-md);
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .header-icon {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .header-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0;
        }
        
        .header-subtitle {
            font-size: 0.875rem;
            opacity: 0.9;
            margin: 0;
        }
        
        /* Toolbar - Compact inline with stats */
        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 2rem;
            background: var(--card-bg);
            border-bottom: 1px solid var(--border);
            gap: 1.5rem;
        }
        
        .search-box {
            flex: 1;
            max-width: 350px;
            position: relative;
        }
        
        .search-box input {
            width: 100%;
            padding: 0.5rem 2.5rem 0.5rem 2.25rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
            background: var(--bg);
            color: var(--text);
            transition: all 0.2s;
        }
        
        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }
        
        .search-box svg {
            pointer-events: none;
        }
        
        .search-clear {
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            transition: all 0.2s;
        }
        
        .search-clear:hover {
            background: var(--danger);
            color: white;
        }
        
        .search-clear svg {
            pointer-events: none;
        }
        
        .toolbar-filters {
            display: flex;
            gap: 0.5rem;
        }
        
        .filter-select {
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--bg);
            color: var(--text);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }
        
        .filter-select:hover {
            border-color: var(--primary);
        }
        
        .toolbar-center {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }
        
        .mini-stat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: var(--bg);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
        }
        
        .mini-stat-icon {
            font-size: 1rem;
            opacity: 0.7;
        }
        
        .mini-stat-value {
            font-weight: 700;
            color: var(--primary);
            font-size: 0.95rem;
        }
        
        .mini-stat-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }
        
        .toolbar-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }
        
        .btn-primary:hover {
            opacity: 0.9;
            box-shadow: var(--shadow-md);
        }
        
        .btn-icon {
            background: transparent;
            border: none;
            color: var(--text);
            padding: 0.5rem;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-sm);
            transition: all 0.2s;
        }
        
        .btn-icon:hover {
            background: var(--bg);
        }
        
        .btn svg {
            flex-shrink: 0;
            vertical-align: middle;
        }
        
        .btn-icon svg {
            pointer-events: none;
        }
        
        /* Types Grid */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.5rem 2rem;
        }
        
        .types-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }
        
        .type-card {
            background: var(--card-bg);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .type-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .type-card:hover {
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }
        
        .type-card:hover::before {
            transform: scaleX(1);
        }
        
        .type-icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
        }
        
        /* SVG Icons */
        .type-icon-svg {
            display: block;
            width: 48px;
            height: 48px;
            margin: 0 auto 0.75rem;
            color: var(--primary);
            transition: transform 0.3s ease, color 0.3s ease;
        }
        
        .type-card:hover .type-icon-svg {
            transform: scale(1.15);
            color: var(--secondary);
        }
        
        [data-theme="dark"] .type-icon-svg {
            opacity: 0.95;
        }
        
        .type-title {
            font-size: 1.125rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text);
        }
        
        .type-description {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        .type-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            background: rgba(102, 126, 234, 0.1);
            color: var(--primary);
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }
        
        .type-badge svg {
            flex-shrink: 0;
        }
        
        .type-badge.priority {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }
        
        .type-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }
        
        .type-status {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }
        
        .type-status.has-data {
            color: var(--success);
            font-weight: 600;
        }
        
        /* Footer - Compact */
        .footer {
            text-align: center;
            padding: 1.5rem;
            color: var(--text-secondary);
            border-top: 1px solid var(--border);
            background: var(--card-bg);
            font-size: 0.875rem;
        }
        
        .footer p {
            margin: 0.25rem 0;
        }
        
        .footer svg {
            flex-shrink: 0;
        }
        
        /* Empty State & No Results */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .empty-state-icon {
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: center;
        }
        
        .empty-state-icon svg {
            opacity: 0.5;
        }
        
        .empty-state-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: var(--text);
        }
        
        .empty-state-description {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        .empty-state-action {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .empty-state-action:hover {
            opacity: 0.9;
            box-shadow: var(--shadow-md);
        }
        
        .empty-state-action svg {
            flex-shrink: 0;
        }
        
        /* Skeleton Loader */
        .skeleton-card {
            background: var(--card-bg);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
            height: 250px;
        }
        
        .skeleton {
            background: linear-gradient(90deg, var(--border) 25%, var(--bg) 50%, var(--border) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: var(--radius-sm);
        }
        
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .skeleton-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 1rem;
        }
        
        .skeleton-title {
            height: 20px;
            width: 70%;
            margin: 0 auto 0.5rem;
        }
        
        .skeleton-description {
            height: 14px;
            width: 90%;
            margin: 0 auto 0.25rem;
        }
        
        .skeleton-footer {
            height: 14px;
            width: 40%;
            margin: 1.5rem auto 0;
        }
        
        /* Notification Toast */
        .notification-toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--card-bg);
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 1rem;
            max-width: 400px;
            z-index: 10001;
            animation: slideInRight 0.3s ease;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .notification-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .notification-content {
            flex: 1;
        }
        
        .notification-title {
            font-weight: 700;
            margin-bottom: 0.25rem;
        }
        
        .notification-message {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .notification-close {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .notification-close:hover {
            color: var(--text);
        }
        
        /* Responsive - compact mode */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .types-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
        }
        
        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* PWA Install Banner */
        .install-banner {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            display: none;
            align-items: center;
            gap: 1rem;
            z-index: 1000;
        }
        
        .install-banner.show {
            display: flex;
        }
        
        /* Settings Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            animation: fadeIn 0.2s ease;
        }
        
        .modal-overlay.show {
            display: flex;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal {
            background: var(--card-bg);
            border-radius: var(--radius);
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            animation: fadeIn 0.3s ease;
        }
        
        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .modal-close {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s;
        }
        
        .modal-close:hover {
            background: var(--bg);
            color: var(--text);
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .setting-group {
            margin-bottom: 2rem;
        }
        
        .setting-group:last-child {
            margin-bottom: 0;
        }
        
        .setting-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.75rem;
            display: block;
        }
        
        .setting-description {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }
        
        .theme-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }
        
        @media (max-width: 768px) {
            .theme-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .theme-option {
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            position: relative;
        }
        
        .theme-option:hover {
            border-color: var(--primary);
            opacity: 0.9;
        }
        
        .theme-option.active {
            border-color: var(--primary);
            background: rgba(102, 126, 234, 0.1);
        }
        
        .theme-option.active::after {
            content: '✓';
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            width: 20px;
            height: 20px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }
        
        .theme-preview {
            width: 100%;
            height: 40px;
            border-radius: var(--radius-sm);
            margin-bottom: 0.5rem;
        }
        
        .theme-name {
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .language-select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 1rem;
            background: var(--bg);
            color: var(--text);
            cursor: pointer;
        }
        
        .language-select:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        /* Drag & Drop */
        .type-card.dragging {
            opacity: 0.5;
            cursor: grabbing;
        }
        
        .type-card.drag-over {
            border-color: var(--primary);
            border-style: dashed;
        }
        
        .drag-handle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            cursor: grab;
            color: var(--text-secondary);
            opacity: 0;
            transition: opacity 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .type-card:hover .drag-handle {
            opacity: 1;
        }
        
        .drag-handle:active {
            cursor: grabbing;
        }
        
        .edit-mode-banner {
            background: var(--warning);
            color: white;
            padding: 0.75rem;
            text-align: center;
            font-weight: 500;
            display: none;
            margin: 1rem auto;
            max-width: 1400px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .edit-mode-banner.show {
            display: flex;
            align-items: center;
        }
        
        .edit-mode-banner svg {
            flex-shrink: 0;
        }
        
        .exit-edit-btn {
            background: none;
            border: none;
            color: white;
            text-decoration: underline;
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            transition: opacity 0.2s;
        }
        
        .exit-edit-btn:hover {
            opacity: 0.8;
        }
        
        /* ============================================
           LOADER & WELCOME SCREENS
           ============================================ */
        
        /* Loader Screen */
        .loader-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 1;
            transition: opacity 0.5s ease;
        }
        
        .loader-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        
        .loader-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
        }
        
        .loader-logo svg {
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .loader-title {
            color: white;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }
        
        .loader-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            margin-bottom: 2rem;
        }
        
        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loader-progress {
            margin-top: 1rem;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.875rem;
        }
        
        /* Confirmation Modal */
        .confirm-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            animation: fadeIn 0.2s ease;
        }
        
        .confirm-modal.show {
            display: flex;
        }
        
        .confirm-modal-content {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 2rem;
            max-width: 450px;
            width: 90%;
            box-shadow: var(--shadow-lg);
            animation: fadeIn 0.3s ease;
        }
        
        .confirm-modal-icon {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .confirm-modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 0.75rem;
            color: var(--text);
        }
        
        .confirm-modal-message {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        .confirm-modal-buttons {
            display: flex;
            gap: 0.75rem;
        }
        
        .confirm-modal-buttons .btn {
            flex: 1;
        }
        
        /* Input Modal */
        .input-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            animation: fadeIn 0.2s ease;
        }
        
        .input-modal.show {
            display: flex;
        }
        
        .input-modal-content {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 2rem;
            max-width: 450px;
            width: 90%;
            box-shadow: var(--shadow-lg);
        }
        
        .input-modal-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text);
        }
        
        .input-modal-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 1rem;
            margin-bottom: 1.5rem;
            background: var(--bg);
            color: var(--text);
        }
        
        .input-modal-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .input-modal-buttons {
            display: flex;
            gap: 0.75rem;
        }
        
        .input-modal-buttons .btn {
            flex: 1;
        }
        
        /* Welcome Screen */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg);
            z-index: 9999;
            overflow-y: auto;
            opacity: 0;
            transition: opacity 0.5s ease;
            pointer-events: none;
        }
        
        .welcome-screen.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .welcome-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        
        .welcome-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 3rem 2rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .welcome-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .welcome-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }
        
        .welcome-icon svg {
            animation: pulseSlow 2s ease-in-out infinite;
        }
        
        @keyframes pulseSlow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .welcome-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .welcome-description {
            font-size: 1.125rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        .welcome-steps {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .welcome-step {
            background: var(--card-bg);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            padding: 2rem;
            animation: fadeIn 0.5s ease forwards;
            opacity: 0;
        }
        
        .welcome-step:nth-child(1) { animation-delay: 0.1s; }
        .welcome-step:nth-child(2) { animation-delay: 0.2s; }
        .welcome-step:nth-child(3) { animation-delay: 0.3s; }
        .welcome-step:nth-child(4) { animation-delay: 0.4s; }
        
        .welcome-step-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .welcome-step-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.25rem;
        }
        
        .welcome-step-title {
            font-size: 1.25rem;
            font-weight: 700;
        }
        
        .welcome-step-content {
            padding-left: 3rem;
        }
        
        .theme-mode-btn {
            position: relative;
        }
        
        .theme-mode-btn.active {
            border-color: var(--primary) !important;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .theme-mode-btn:hover {
            opacity: 0.9;
            box-shadow: var(--shadow-md);
        }
        
        .welcome-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 3rem;
            animation: fadeIn 0.5s ease 0.5s forwards;
            opacity: 0;
        }
        
        .btn-large {
            padding: 1rem 2.5rem;
            font-size: 1.125rem;
            border-radius: var(--radius);
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .btn-large svg {
            flex-shrink: 0;
        }
        
        .btn-large.btn-gradient {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }
        
        .btn-large.btn-gradient:hover {
            opacity: 0.9;
            box-shadow: var(--shadow-lg);
        }
        
        .btn-large.btn-outline {
            background: transparent;
            border: 2px solid var(--border);
            color: var(--text);
        }
        
        .btn-large.btn-outline:hover {
            border-color: var(--primary);
            background: rgba(102, 126, 234, 0.1);
        }
        
        /* Main App - hidden by default but preloaded */
        .main-app {
            position: relative;
            z-index: 1;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .main-app.show {
            opacity: 1;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 0.75rem 1rem;
            }
            
            .header-title {
                font-size: 1.25rem;
            }
            
            .header-icon {
                font-size: 1.5rem;
            }
            
            .toolbar {
                padding: 0.75rem 1rem;
                flex-wrap: wrap;
                gap: 0.75rem;
            }
            
            .search-box {
                order: 1;
                width: 100%;
                max-width: 100%;
            }
            
            .toolbar-filters {
                order: 2;
                width: 100%;
                flex-wrap: wrap;
            }
            
            .filter-select {
                flex: 1;
                min-width: 140px;
            }
            
            .toolbar-center {
                order: 4;
                width: 100%;
                justify-content: space-between;
                gap: 0.5rem;
            }
            
            .mini-stat {
                flex: 1;
                padding: 0.4rem 0.5rem;
                justify-content: center;
            }
            
            .mini-stat-value {
                font-size: 0.875rem;
            }
            
            .mini-stat-label {
                font-size: 0.65rem;
            }
            
            .toolbar-actions {
                order: 3;
            }
            
            #installBtn {
                order: 5;
                width: 100%;
            }
            
            .notification-toast {
                bottom: 1rem;
                right: 1rem;
                left: 1rem;
                max-width: 100%;
            }
            
            .empty-state {
                padding: 2rem 1rem;
            }
            
            .empty-state-icon svg {
                width: 48px;
                height: 48px;
            }
            
            .welcome-icon svg {
                width: 48px;
                height: 48px;
            }
            
            .welcome-title {
                font-size: 2rem;
            }
            
            .welcome-container {
                padding: 2rem 1rem;
            }
            
            .welcome-step {
                padding: 1.5rem;
            }
            
            .welcome-step-content {
                padding-left: 0;
                margin-top: 1rem;
            }
            
            .welcome-actions {
                flex-direction: column;
            }
            
            .btn-large {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- LOADER SCREEN -->
    <div class="loader-screen" id="loaderScreen">
        <div class="loader-logo">
            <svg width="64" height="64" style="color: white;">
                <use href="#icon-heart"/>
            </svg>
        </div>
        <h1 class="loader-title">Love Dossier</h1>
        <p class="loader-subtitle">Loading your memories...</p>
        <div class="loader-spinner"></div>
        <p class="loader-progress" id="loaderProgress">Initializing...</p>
    </div>
    
    <!-- WELCOME SCREEN (First time only) -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-container">
            <div class="welcome-header">
                <div class="welcome-icon">
                    <svg width="80" height="80" style="color: var(--primary);">
                        <use href="#icon-heart"/>
                    </svg>
                </div>
                <h1 class="welcome-title">Welcome to Love Dossier!</h1>
                <p class="welcome-description">
                    Your private space to organize everything about your loved one. 
                    32 types of information, all stored locally on your device.
                </p>
            </div>
            
            <div class="welcome-steps">
                <!-- Step 1: Language -->
                <div class="welcome-step">
                    <div class="welcome-step-header">
                        <div class="welcome-step-number">1</div>
                        <h2 class="welcome-step-title">Choose Your Language</h2>
                    </div>
                    <div class="welcome-step-content">
                        <select class="language-select" id="welcomeLanguage">
                            <option value="en">🇬🇧 English</option>
                            <option value="uk">🇺🇦 Українська</option>
                            <option value="ru">🇷🇺 Русский</option>
                            <option value="pl">🇵🇱 Polski</option>
                            <option value="es">🇪🇸 Español</option>
                            <option value="fr">🇫🇷 Français</option>
                            <option value="de">🇩🇪 Deutsch</option>
                        </select>
                    </div>
                </div>
                
                <!-- Step 2: Color Theme -->
                <div class="welcome-step">
                    <div class="welcome-step-header">
                        <div class="welcome-step-number">2</div>
                        <h2 class="welcome-step-title">Pick Your Favorite Color</h2>
                    </div>
                    <div class="welcome-step-content">
                        <div class="theme-grid" id="welcomeThemes">
                            <div class="theme-option active" data-theme="purple">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #667eea, #764ba2);"></div>
                                <div class="theme-name">Purple</div>
                            </div>
                            <div class="theme-option" data-theme="pink">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #ec4899, #f472b6);"></div>
                                <div class="theme-name">Pink</div>
                            </div>
                            <div class="theme-option" data-theme="ocean">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #0ea5e9, #38bdf8);"></div>
                                <div class="theme-name">Ocean</div>
                            </div>
                            <div class="theme-option" data-theme="sunset">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #f97316, #fb923c);"></div>
                                <div class="theme-name">Sunset</div>
                            </div>
                            <div class="theme-option" data-theme="forest">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #10b981, #34d399);"></div>
                                <div class="theme-name">Forest</div>
                            </div>
                            <div class="theme-option" data-theme="romantic">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #ef4444, #f87171);"></div>
                                <div class="theme-name">Red</div>
                            </div>
                            <div class="theme-option" data-theme="mint">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #14b8a6, #5eead4);"></div>
                                <div class="theme-name">Mint</div>
                            </div>
                            <div class="theme-option" data-theme="lavender">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #a855f7, #c084fc);"></div>
                                <div class="theme-name">Lavender</div>
                            </div>
                            <div class="theme-option" data-theme="gold">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #eab308, #fbbf24);"></div>
                                <div class="theme-name">Gold</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 3: Dark/Light Mode -->
                <div class="welcome-step">
                    <div class="welcome-step-header">
                        <div class="welcome-step-number">3</div>
                        <h2 class="welcome-step-title">Choose Your Theme</h2>
                    </div>
                    <div class="welcome-step-content">
                        <div style="display: flex; gap: 1rem;">
                            <button class="theme-mode-btn active" data-mode="light" style="flex: 1; padding: 1rem; border: 2px solid var(--border); border-radius: var(--radius-sm); background: white; cursor: pointer; transition: all 0.2s;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">☀️</div>
                                <div style="font-weight: 600;">Light Mode</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.25rem;">Bright & clear</div>
                            </button>
                            <button class="theme-mode-btn" data-mode="dark" style="flex: 1; padding: 1rem; border: 2px solid var(--border); border-radius: var(--radius-sm); background: #1f2937; color: white; cursor: pointer; transition: all 0.2s;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">🌙</div>
                                <div style="font-weight: 600;">Dark Mode</div>
                                <div style="font-size: 0.8rem; color: #9ca3af; margin-top: 0.25rem;">Easy on eyes</div>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Step 4: Privacy -->
                <div class="welcome-step">
                    <div class="welcome-step-header">
                        <div class="welcome-step-number">4</div>
                        <h2 class="welcome-step-title">Your Privacy Matters</h2>
                    </div>
                    <div class="welcome-step-content">
                        <ul style="list-style: none; padding: 0; display: flex; flex-direction: column; gap: 0.75rem;">
                            <li style="display: flex; align-items: center; gap: 0.75rem;">
                                <svg width="24" height="24" style="color: var(--success);"><use href="#icon-shield"/></svg>
                                <span>All data stored locally on your device</span>
                            </li>
                            <li style="display: flex; align-items: center; gap: 0.75rem;">
                                <svg width="24" height="24" style="color: var(--success);"><use href="#icon-lock"/></svg>
                                <span>No backend, no servers, no tracking</span>
                            </li>
                            <li style="display: flex; align-items: center; gap: 0.75rem;">
                                <svg width="24" height="24" style="color: var(--success);"><use href="#icon-wifi-off"/></svg>
                                <span>Works completely offline</span>
                            </li>
                            <li style="display: flex; align-items: center; gap: 0.75rem;">
                                <svg width="24" height="24" style="color: var(--danger);"><use href="#icon-heart"/></svg>
                                <span>100% free and private forever</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="welcome-actions">
                <button class="btn-large btn-gradient" id="startBtn">
                    <svg width="24" height="24" style="margin-right: 8px;"><use href="#icon-heart"/></svg>
                    Let's Start!
                </button>
            </div>
        </div>
    </div>
    
    <!-- MAIN APP -->
    <div class="main-app" id="mainApp">
    <!-- Header - Compact -->
    <header class="header">
        <div class="header-left">
            <div class="header-icon">
                <svg width="32" height="32" style="color: white;">
                    <use href="#icon-heart"/>
                </svg>
            </div>
            <div>
                <h1 class="header-title">Love Dossier</h1>
            </div>
        </div>
        <div class="toolbar-actions">
            <button class="btn-icon" id="editModeBtn" title="Edit Layout">
                <svg width="20" height="20"><use href="#icon-edit"/></svg>
            </button>
            <button class="btn-icon" id="themeToggle" title="Toggle Dark Mode">
                <svg width="20" height="20"><use href="#icon-moon"/></svg>
            </button>
            <button class="btn-icon" id="settingsBtn" title="Settings">
                <svg width="20" height="20"><use href="#icon-settings"/></svg>
            </button>
        </div>
    </header>
    
    <!-- Toolbar with inline stats -->
    <div class="toolbar">
        <div class="search-box">
            <svg width="16" height="16" style="position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"><use href="#icon-search"/></svg>
            <input type="text" id="searchInput" placeholder="Search types..." data-i18n-placeholder="search">
            <button class="search-clear" id="searchClear" style="display: none;">
                <svg width="16" height="16"><use href="#icon-close"/></svg>
            </button>
        </div>
        
        <div class="toolbar-filters">
            <select id="filterType" class="filter-select">
                <option value="all">All Types</option>
                <option value="priority">Priority Only</option>
                <option value="enhanced">Enhanced Only</option>
                <option value="filled">Filled Only</option>
                <option value="empty">Empty Only</option>
            </select>
            <select id="sortBy" class="filter-select">
                <option value="default">Default Order</option>
                <option value="name">Sort by Name</option>
                <option value="records">Sort by Records</option>
                <option value="lastUsed">Last Used</option>
            </select>
        </div>
        
        <div class="toolbar-center">
            <div class="mini-stat">
                <div>
                    <div class="mini-stat-value">32</div>
                    <div class="mini-stat-label" data-i18n="toolbarTypes">Types</div>
                </div>
            </div>
            <div class="mini-stat">
                <div>
                    <div class="mini-stat-value" id="filledTypes">0</div>
                    <div class="mini-stat-label" data-i18n="toolbarFilled">Filled</div>
                </div>
            </div>
            <div class="mini-stat">
                <div>
                    <div class="mini-stat-value" id="totalRecords">0</div>
                    <div class="mini-stat-label" data-i18n="toolbarRecords">Records</div>
                </div>
            </div>
            <div class="mini-stat">
                <div>
                    <div class="mini-stat-value" id="storageSize">0 KB</div>
                    <div class="mini-stat-label" data-i18n="toolbarStorage">Storage</div>
                </div>
            </div>
        </div>
        
        <button class="btn btn-primary" id="installBtn" style="display: none; padding: 0.5rem 1rem; font-size: 0.875rem;">
            <svg width="16" height="16" style="margin-right: 6px;"><use href="#icon-download"/></svg>
            Install
        </button>
    </div>
    
    <!-- Edit Mode Banner -->
    <div class="edit-mode-banner" id="editModeBanner">
        <svg width="16" height="16" style="margin-right: 8px;"><use href="#icon-edit"/></svg> Edit Mode: Drag cards to reorder • <button id="exitEditModeBtn" class="exit-edit-btn">Save & Exit</button>
    </div>
    
    <!-- Types Grid -->
    <div class="container">
        <div class="types-grid" id="typesGrid">
            <!-- Типи будуть додані через JavaScript -->
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="footer">
        <p>Made with <svg width="16" height="16" style="color: var(--danger); vertical-align: text-bottom; display: inline-block;"><use href="#icon-heart"/></svg> for couples • Version 3.0.0</p>
        <p style="margin-top: 0.5rem; font-size: 0.875rem;">
            All data stored locally • No backend • 100% Private
        </p>
    </footer>
    </div><!-- End Main App -->
    
    <!-- Confirmation Modal -->
    <div class="confirm-modal" id="confirmModal">
        <div class="confirm-modal-content">
            <div class="confirm-modal-icon" id="confirmIcon">
                <svg width="48" height="48"><use href="#icon-warning"/></svg>
            </div>
            <h3 class="confirm-modal-title" id="confirmTitle" data-i18n="confirmAction">Confirm Action</h3>
            <p class="confirm-modal-message" id="confirmMessage" data-i18n="areYouSure">Are you sure?</p>
            <div class="confirm-modal-buttons">
                <button class="btn" id="confirmCancelBtn" style="background: var(--border); color: var(--text);" data-i18n="cancel">
                    Cancel
                </button>
                <button class="btn btn-primary" id="confirmOkBtn" data-i18n="confirm">
                    Confirm
                </button>
            </div>
        </div>
    </div>
    
    <!-- Input Modal -->
    <div class="input-modal" id="inputModal">
        <div class="input-modal-content">
            <h3 class="input-modal-title" id="inputModalTitle" data-i18n="enterValue">Enter value</h3>
            <input type="text" class="input-modal-input" id="inputModalInput" placeholder="Type here..." data-i18n-placeholder="typeHere">
            <div class="input-modal-buttons">
                <button class="btn" id="inputModalCancelBtn" style="background: var(--border); color: var(--text);" data-i18n="cancel">
                    Cancel
                </button>
                <button class="btn btn-primary" id="inputModalOkBtn" data-i18n="ok">
                    OK
                </button>
            </div>
        </div>
    </div>
    
    <!-- PWA Install Banner -->
    <div class="install-banner" id="installBanner">
        <div>
            <strong>Install app?</strong>
            <p style="font-size: 0.875rem; opacity: 0.9; margin-top: 0.25rem;">
                Works offline, like a native app
            </p>
        </div>
        <button class="btn btn-primary" id="installBannerBtn">
            Install
        </button>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal">
            <div class="modal-header">
                <h2><svg width="20" height="20" style="margin-right: 8px; vertical-align: text-bottom;"><use href="#icon-settings"/></svg> Settings</h2>
                <button class="modal-close" id="closeSettingsBtn" aria-label="Close settings">
                    <svg width="20" height="20"><use href="#icon-close"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <!-- Color Theme -->
                <div class="setting-group">
                    <label class="setting-label">Color Theme</label>
                    <div class="setting-description">Choose your favorite color scheme</div>
                    <div class="theme-grid">
                        <div class="theme-option" data-theme="purple">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #667eea, #764ba2);"></div>
                            <div class="theme-name">Purple</div>
                        </div>
                        <div class="theme-option" data-theme="pink">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #ec4899, #f472b6);"></div>
                            <div class="theme-name">Pink Love</div>
                        </div>
                        <div class="theme-option" data-theme="ocean">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #0ea5e9, #38bdf8);"></div>
                            <div class="theme-name">Ocean</div>
                        </div>
                        <div class="theme-option" data-theme="sunset">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #f97316, #fb923c);"></div>
                            <div class="theme-name">Sunset</div>
                        </div>
                        <div class="theme-option" data-theme="forest">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #10b981, #34d399);"></div>
                            <div class="theme-name">Forest</div>
                        </div>
                        <div class="theme-option" data-theme="romantic">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #ef4444, #f87171);"></div>
                            <div class="theme-name">Romantic</div>
                        </div>
                        <div class="theme-option" data-theme="mint">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #14b8a6, #5eead4);"></div>
                            <div class="theme-name">Mint</div>
                        </div>
                        <div class="theme-option" data-theme="lavender">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #a855f7, #c084fc);"></div>
                            <div class="theme-name">Lavender</div>
                        </div>
                        <div class="theme-option" data-theme="gold">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #eab308, #fbbf24);"></div>
                            <div class="theme-name">Gold</div>
                        </div>
                    </div>
                </div>

                <!-- Language -->
                <div class="setting-group">
                    <label class="setting-label">Language</label>
                    <div class="setting-description">Select interface language</div>
                    <select class="language-select" id="languageSelect">
                        <option value="en">English</option>
                        <option value="uk">Українська</option>
                        <option value="ru">Русский</option>
                        <option value="pl">Polski</option>
                        <option value="es">Español</option>
                        <option value="fr">Français</option>
                        <option value="de">Deutsch</option>
                    </select>
                </div>

                <!-- Dark Mode -->
                <div class="setting-group">
                    <label class="setting-label">Dark Mode</label>
                    <div class="setting-description">Toggle light/dark theme</div>
                    <button class="btn btn-primary" id="toggleThemeBtn">
                        <svg width="18" height="18" style="margin-right: 6px;"><use href="#icon-contrast"/></svg> Toggle Dark Mode
                    </button>
                </div>

                <!-- Reset Order -->
                <div class="setting-group">
                    <label class="setting-label">Reset Card Order</label>
                    <div class="setting-description">Restore default card layout</div>
                    <button class="btn btn-primary" id="resetCardOrderBtn">
                        <svg width="18" height="18" style="margin-right: 6px;"><use href="#icon-undo"/></svg> Reset to Default
                    </button>
                </div>

                <!-- Export/Import Data -->
                <div class="setting-group">
                    <label class="setting-label">Backup & Restore</label>
                    <div class="setting-description">Export or import all your data</div>
                    <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                        <button class="btn btn-primary" id="exportJSONBtn">
                            <svg width="18" height="18" style="margin-right: 6px;"><use href="#icon-download"/></svg> Export JSON
                        </button>
                        <button class="btn btn-primary" id="exportPDFBtn">
                            <svg width="18" height="18" style="margin-right: 6px;"><use href="#icon-pdf"/></svg> Export PDF
                        </button>
                        <button class="btn btn-primary" id="importDataBtn">
                            <svg width="18" height="18" style="margin-right: 6px;"><use href="#icon-upload"/></svg> Import Data
                        </button>
                    </div>
                    <input type="file" id="importFileInput" accept=".json" style="display: none;">
                </div>
                
                <!-- Share -->
                <div class="setting-group">
                    <label class="setting-label">Share</label>
                    <div class="setting-description">Share Love Dossier with friends</div>
                    <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                        <button class="btn btn-primary" id="shareTwitterBtn">
                            <svg width="18" height="18" style="margin-right: 6px;"><use href="#icon-twitter"/></svg> Twitter
                        </button>
                        <button class="btn btn-primary" id="shareFacebookBtn">
                            <svg width="18" height="18" style="margin-right: 6px;"><use href="#icon-facebook"/></svg> Facebook
                        </button>
                        <button class="btn btn-primary" id="shareWebShareBtn">
                            <svg width="18" height="18" style="margin-right: 6px;"><use href="#icon-share"/></svg> More...
                        </button>
                    </div>
                </div>
                
                <!-- Password Protection -->
                <div class="setting-group">
                    <label class="setting-label">Privacy Protection</label>
                    <div class="setting-description">Add password protection to your Love Dossier</div>
                    <div id="passwordStatus" style="margin-bottom: 0.75rem; font-size: 0.875rem;">
                        Status: <span id="passwordEnabled">Not Protected</span>
                    </div>
                    <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                        <button class="btn btn-primary" id="setupPasswordBtn">
                            <svg width="18" height="18" style="margin-right: 6px;"><use href="#icon-lock"/></svg> Set Password
                        </button>
                        <button class="btn btn-primary" id="removePasswordBtn" style="display: none;">
                            <svg width="18" height="18" style="margin-right: 6px;"><use href="#icon-unlock"/></svg> Remove Password
                        </button>
                    </div>
                </div>
                
                <!-- Clear All Data -->
                <div class="setting-group">
                    <label class="setting-label" style="color: var(--danger);">Danger Zone</label>
                    <div class="setting-description">Clear all stored data (cannot be undone!)</div>
                    <button class="btn" style="background: var(--danger); color: white;" id="clearAllDataBtn">
                        <svg width="18" height="18" style="margin-right: 6px;"><use href="#icon-trash"/></svg> Clear All Data
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // LOVE DOSSIER - INDEX.HTML JavaScript
        // Version: 3.0.0
        // ============================================
        
        // 0. CONFIG & DEBUG
        const DEBUG = false; // Set to false in production
        const log = (...args) => DEBUG && console.log(...args);
        const error = (...args) => console.error(...args);
        
        // 1. LOADER & WELCOME FLOW
        const AppFlow = {
            isFirstVisit: !localStorage.getItem('lovedossier_initialized'),
            selectedLang: 'en',
            selectedTheme: 'purple',
            selectedMode: 'light',
            
            // Loader simulation
            async showLoader() {
                const loader = document.getElementById('loaderScreen');
                const progress = document.getElementById('loaderProgress');
                
                const steps = [
                    'Loading resources...',
                    'Initializing app...',
                    'Preparing your space...',
                    'Almost ready...'
                ];
                
                for (let i = 0; i < steps.length; i++) {
                    progress.textContent = steps[i];
                    await this.delay(600);
                }
                
                // CROSSFADE: Show next screen BEFORE hiding loader
                if (this.isFirstVisit) {
                    this.showWelcome();
                } else {
                    this.showMainApp();
                }
                
                // Small delay to let next screen start appearing
                await this.delay(50);
                
                // Now fade out loader (crossfade happening)
                loader.classList.add('fade-out');
                await this.delay(500);
                
                // Remove from DOM after animation
                loader.remove();
            },
            
            // Welcome screen
            showWelcome() {
                const welcome = document.getElementById('welcomeScreen');
                
                // Setup event listeners first (only once)
                if (!welcome.dataset.initialized) {
                    // Setup color theme selection
                    const welcomeThemes = document.querySelectorAll('#welcomeThemes .theme-option');
                    welcomeThemes.forEach(option => {
                        option.addEventListener('click', () => {
                            welcomeThemes.forEach(o => o.classList.remove('active'));
                            option.classList.add('active');
                            this.selectedTheme = option.getAttribute('data-theme');
                            document.documentElement.setAttribute('data-color-theme', this.selectedTheme);
                        });
                    });
                    
                    // Setup dark/light mode selection
                    const modeBtns = document.querySelectorAll('.theme-mode-btn');
                    modeBtns.forEach(btn => {
                        btn.addEventListener('click', () => {
                            modeBtns.forEach(b => b.classList.remove('active'));
                            btn.classList.add('active');
                            this.selectedMode = btn.getAttribute('data-mode');
                            
                            if (this.selectedMode === 'dark') {
                                document.documentElement.setAttribute('data-theme', 'dark');
                            } else {
                                document.documentElement.removeAttribute('data-theme');
                            }
                        });
                    });
                    
                    // Setup language selection
                    const welcomeLang = document.getElementById('welcomeLanguage');
                    welcomeLang.addEventListener('change', (e) => {
                        this.selectedLang = e.target.value;
                    });
                    
                    // Start button
                    document.getElementById('startBtn').addEventListener('click', () => {
                        this.finishWelcome();
                    });
                    
                    welcome.dataset.initialized = 'true';
                }
                
                // Trigger show animation
                setTimeout(() => {
                    welcome.classList.add('show');
                }, 50);
            },
            
            // Finish welcome and show main app
            async finishWelcome() {
                const welcome = document.getElementById('welcomeScreen');
                
                // Save settings
                localStorage.setItem('language', this.selectedLang);
                localStorage.setItem('colorTheme', this.selectedTheme);
                localStorage.setItem('theme', this.selectedMode);
                localStorage.setItem('lovedossier_initialized', 'true');
                
                // CROSSFADE: Show main app BEFORE fading out welcome
                this.showMainApp();
                
                // Small delay to let main app start appearing
                await this.delay(50);
                
                // Now fade out welcome (crossfade happening)
                welcome.classList.add('fade-out');
                await this.delay(500);
                
                // Remove from DOM after animation
                welcome.remove();
            },
            
            // Show main app
            showMainApp() {
                const mainApp = document.getElementById('mainApp');
                
                // Small delay for smooth transition
                setTimeout(() => {
                    mainApp.classList.add('show');
                    
                    // Show skeleton loader first
                    showSkeletonLoader();
                    
                    // Initialize app after delay (smooth loading feel)
                    setTimeout(() => {
                        init();
                    }, 300);
                }, 50);
            },
            
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        };
        
        // Start app flow on page load
        window.addEventListener('load', async () => {
            // Check password first
            const passedAuth = await checkPassword();
            if (!passedAuth) {
                return;
            }
            AppFlow.showLoader();
        });
        
        // 1. INTERNATIONALIZATION (i18n)
        const i18n = {
            en: {
                // General
                title: '💕 Love Dossier',
                subtitle: '32 types for organizing information about your loved one',
                search: 'Search types...',
                totalTypes: 'Total Types',
                filled: 'Filled',
                totalRecords: 'Total Records',
                storageSize: 'Storage Size',
                empty: 'Empty',
                records: 'records',
                settings: 'Settings',
                colorTheme: 'Color Theme',
                language: 'Language',
                darkMode: 'Dark Mode',
                resetOrder: 'Reset Card Order',
                clearData: 'Clear All Data',
                install: 'Install PWA',
                
                // Buttons
                cancel: 'Cancel',
                confirm: 'Confirm',
                ok: 'OK',
                save: 'Save',
                delete: 'Delete',
                edit: 'Edit',
                close: 'Close',
                back: 'Back',
                
                // Toolbar
                toolbarTypes: 'Types',
                toolbarFilled: 'Filled',
                toolbarRecords: 'Records',
                toolbarStorage: 'Storage',
                
                // Modals base
                confirmAction: 'Confirm Action',
                areYouSure: 'Are you sure?',
                enterValue: 'Enter value',
                typeHere: 'Type here...',
                loadingFile: 'Loading file...',
                
                // Modals
                resetOrderTitle: 'Reset Card Order',
                resetOrderMessage: 'Are you sure you want to reset card order to default?',
                clearDataTitle: 'Clear All Data',
                clearDataMessage: 'This will delete ALL your data! Are you sure?',
                finalConfirmTitle: 'Final Confirmation',
                finalConfirmMessage: 'Really sure? This cannot be undone!',
                importDataTitle: 'Import Data',
                importDataMessage: 'This will replace ALL current data! Continue?',
                passwordRequiredTitle: 'Password Required',
                passwordRequiredPlaceholder: 'Enter password to access Love Dossier',
                setPasswordTitle: 'Set Password',
                setPasswordPlaceholder: 'Enter new password (min 4 characters)',
                confirmPasswordTitle: 'Confirm Password',
                confirmPasswordPlaceholder: 'Enter password again',
                removePasswordTitle: 'Remove Password',
                removePasswordPlaceholder: 'Enter current password',
                
                // Notifications
                success: 'Success',
                error: 'Error',
                warning: 'Warning',
                info: 'Info',
                cardOrderReset: 'Card order reset to default!',
                dataCleared: 'All data has been deleted',
                dataExported: 'Data exported successfully!',
                dataImported: 'Data imported successfully!',
                invalidBackup: 'Invalid backup file',
                passwordTooShort: 'Password too short! Min 4 characters.',
                passwordsDontMatch: 'Passwords don\'t match!',
                incorrectPassword: 'Incorrect password!',
                passwordEnabled: 'Password protection enabled!',
                passwordRemoved: 'Password protection removed!',
                summaryExported: 'Summary exported!',
                sharedSuccess: 'Shared successfully!',
                linkCopied: 'Link copied to clipboard!',
                shareCancelled: 'Share cancelled',
                comingSoon: 'Coming Soon',
                willBeIntegrated: 'will be integrated soon!',
                
                // Empty States
                noResults: 'No results found for',
                noMatches: 'No types match your filters',
                tryAdjusting: 'Try adjusting your search or filters',
                resetFilters: 'Reset Filters',
                
                // Reminders
                backupReminder: 'Backup Reminder',
                backupReminderMessage: 'It\'s been a while! Consider backing up your data.',
                welcomeBack: 'Welcome back!',
                welcomeBackMessage: 'It\'s been a while. Check what\'s new!',
                
                // PDF Export
                generatingPDF: 'Generating PDF...',
                pdfWait: 'This may take a moment',
                
                // Password Status
                protected: 'Protected',
                notProtected: 'Not Protected'
            },
            uk: {
                // Загальне
                title: '💕 Досьє коханої',
                subtitle: '32 типи для організації інформації про вашу кохану людину',
                search: 'Пошук типів...',
                totalTypes: 'Всього типів',
                filled: 'Заповнено',
                totalRecords: 'Всього записів',
                storageSize: 'Розмір даних',
                empty: 'Порожньо',
                records: 'записів',
                settings: 'Налаштування',
                colorTheme: 'Кольорова тема',
                language: 'Мова',
                darkMode: 'Темна тема',
                resetOrder: 'Скинути порядок',
                clearData: 'Очистити дані',
                install: 'Встановити PWA',
                
                // Кнопки
                cancel: 'Скасувати',
                confirm: 'Підтвердити',
                ok: 'OK',
                save: 'Зберегти',
                delete: 'Видалити',
                edit: 'Редагувати',
                close: 'Закрити',
                back: 'Назад',
                
                // Панель інструментів
                toolbarTypes: 'Типів',
                toolbarFilled: 'Заповнено',
                toolbarRecords: 'Записів',
                toolbarStorage: 'Сховище',
                
                // Модальні вікна базові
                confirmAction: 'Підтвердження дії',
                areYouSure: 'Ви впевнені?',
                enterValue: 'Введіть значення',
                typeHere: 'Введіть тут...',
                loadingFile: 'Завантаження файлу...',
                
                // Модальні вікна
                resetOrderTitle: 'Скинути порядок карток',
                resetOrderMessage: 'Ви впевнені, що хочете скинути порядок карток до стандартного?',
                clearDataTitle: 'Очистити всі дані',
                clearDataMessage: 'Це видалить ВСІ ваші дані! Ви впевнені?',
                finalConfirmTitle: 'Остаточне підтвердження',
                finalConfirmMessage: 'Точно впевнені? Це неможливо скасувати!',
                importDataTitle: 'Імпорт даних',
                importDataMessage: 'Це замінить ВСІ поточні дані! Продовжити?',
                passwordRequiredTitle: 'Потрібен пароль',
                passwordRequiredPlaceholder: 'Введіть пароль для доступу до Love Dossier',
                setPasswordTitle: 'Встановити пароль',
                setPasswordPlaceholder: 'Введіть новий пароль (мін. 4 символи)',
                confirmPasswordTitle: 'Підтвердження паролю',
                confirmPasswordPlaceholder: 'Введіть пароль ще раз',
                removePasswordTitle: 'Видалити пароль',
                removePasswordPlaceholder: 'Введіть поточний пароль',
                
                // Сповіщення
                success: 'Успіх',
                error: 'Помилка',
                warning: 'Попередження',
                info: 'Інформація',
                cardOrderReset: 'Порядок карток скинуто до стандартного!',
                dataCleared: 'Всі дані видалено',
                dataExported: 'Дані успішно експортовано!',
                dataImported: 'Дані успішно імпортовано!',
                invalidBackup: 'Невірний файл резервної копії',
                passwordTooShort: 'Пароль занадто короткий! Мін. 4 символи.',
                passwordsDontMatch: 'Паролі не співпадають!',
                incorrectPassword: 'Невірний пароль!',
                passwordEnabled: 'Захист паролем увімкнено!',
                passwordRemoved: 'Захист паролем вимкнено!',
                summaryExported: 'Звіт експортовано!',
                sharedSuccess: 'Успішно поділилися!',
                linkCopied: 'Посилання скопійовано в буфер!',
                shareCancelled: 'Поширення скасовано',
                comingSoon: 'Скоро буде',
                willBeIntegrated: 'буде інтегровано найближчим часом!',
                
                // Порожні стани
                noResults: 'Нічого не знайдено для',
                noMatches: 'Жодні типи не відповідають вашим фільтрам',
                tryAdjusting: 'Спробуйте змінити пошук або фільтри',
                resetFilters: 'Скинути фільтри',
                
                // Нагадування
                backupReminder: 'Нагадування про резервну копію',
                backupReminderMessage: 'Пройшов час! Розгляньте можливість створення резервної копії даних.',
                welcomeBack: 'З поверненням!',
                welcomeBackMessage: 'Пройшов час. Подивіться, що нового!',
                
                // PDF Експорт
                generatingPDF: 'Генерація PDF...',
                pdfWait: 'Це може зайняти деякий час',
                
                // Статус паролю
                protected: 'Захищено',
                notProtected: 'Не захищено'
            },
            ru: {
                // Общее
                title: '💕 Досье любимого',
                subtitle: '32 типа для организации информации о вашем любимом человеке',
                search: 'Поиск типов...',
                totalTypes: 'Всего типов',
                filled: 'Заполнено',
                totalRecords: 'Всего записей',
                storageSize: 'Размер данных',
                empty: 'Пусто',
                records: 'записей',
                settings: 'Настройки',
                colorTheme: 'Цветовая тема',
                language: 'Язык',
                darkMode: 'Темная тема',
                resetOrder: 'Сбросить порядок',
                clearData: 'Очистить данные',
                install: 'Установить PWA',
                
                // Кнопки
                cancel: 'Отмена',
                confirm: 'Подтвердить',
                ok: 'OK',
                save: 'Сохранить',
                delete: 'Удалить',
                edit: 'Редактировать',
                close: 'Закрыть',
                back: 'Назад',
                
                // Панель инструментов
                toolbarTypes: 'Типов',
                toolbarFilled: 'Заполнено',
                toolbarRecords: 'Записей',
                toolbarStorage: 'Хранилище',
                
                // Модальные окна базовые
                confirmAction: 'Подтверждение действия',
                areYouSure: 'Вы уверены?',
                enterValue: 'Введите значение',
                typeHere: 'Введите здесь...',
                loadingFile: 'Загрузка файла...',
                
                // Модальные окна
                resetOrderTitle: 'Сбросить порядок карточек',
                resetOrderMessage: 'Вы уверены, что хотите сбросить порядок карточек к стандартному?',
                clearDataTitle: 'Очистить все данные',
                clearDataMessage: 'Это удалит ВСЕ ваши данные! Вы уверены?',
                finalConfirmTitle: 'Финальное подтверждение',
                finalConfirmMessage: 'Точно уверены? Это невозможно отменить!',
                importDataTitle: 'Импорт данных',
                importDataMessage: 'Это заменит ВСЕ текущие данные! Продолжить?',
                passwordRequiredTitle: 'Требуется пароль',
                passwordRequiredPlaceholder: 'Введите пароль для доступа к Love Dossier',
                setPasswordTitle: 'Установить пароль',
                setPasswordPlaceholder: 'Введите новый пароль (мин. 4 символа)',
                confirmPasswordTitle: 'Подтверждение пароля',
                confirmPasswordPlaceholder: 'Введите пароль еще раз',
                removePasswordTitle: 'Удалить пароль',
                removePasswordPlaceholder: 'Введите текущий пароль',
                
                // Уведомления
                success: 'Успех',
                error: 'Ошибка',
                warning: 'Предупреждение',
                info: 'Информация',
                cardOrderReset: 'Порядок карточек сброшен к стандартному!',
                dataCleared: 'Все данные удалены',
                dataExported: 'Данные успешно экспортированы!',
                dataImported: 'Данные успешно импортированы!',
                invalidBackup: 'Неверный файл резервной копии',
                passwordTooShort: 'Пароль слишком короткий! Мин. 4 символа.',
                passwordsDontMatch: 'Пароли не совпадают!',
                incorrectPassword: 'Неверный пароль!',
                passwordEnabled: 'Защита паролем включена!',
                passwordRemoved: 'Защита паролем отключена!',
                summaryExported: 'Отчет экспортирован!',
                sharedSuccess: 'Успешно поделились!',
                linkCopied: 'Ссылка скопирована в буфер!',
                shareCancelled: 'Распространение отменено',
                comingSoon: 'Скоро будет',
                willBeIntegrated: 'будет интегрировано в ближайшее время!',
                
                // Пустые состояния
                noResults: 'Ничего не найдено для',
                noMatches: 'Никакие типы не соответствуют вашим фильтрам',
                tryAdjusting: 'Попробуйте изменить поиск или фильтры',
                resetFilters: 'Сбросить фильтры',
                
                // Напоминания
                backupReminder: 'Напоминание о резервной копии',
                backupReminderMessage: 'Прошло время! Рассмотрите возможность создания резервной копии данных.',
                welcomeBack: 'С возвращением!',
                welcomeBackMessage: 'Прошло время. Посмотрите, что нового!',
                
                // PDF Экспорт
                generatingPDF: 'Генерация PDF...',
                pdfWait: 'Это может занять некоторое время',
                
                // Статус пароля
                protected: 'Защищено',
                notProtected: 'Не защищено'
            },
            pl: {
                title: '💕 Dossier ukochanej',
                subtitle: '32 typy do organizacji informacji o ukochanej osobie',
                search: 'Szukaj typów...',
                totalTypes: 'Wszystkie typy',
                filled: 'Wypełnione',
                totalRecords: 'Wszystkie wpisy',
                storageSize: 'Rozmiar danych',
                empty: 'Puste',
                records: 'wpisów',
                settings: 'Ustawienia',
                colorTheme: 'Kolorowy motyw',
                language: 'Język',
                darkMode: 'Tryb ciemny',
                resetOrder: 'Resetuj kolejność',
                clearData: 'Wyczyść dane',
                install: 'Zainstaluj PWA'
            },
            es: {
                title: '💕 Dossier de Amor',
                subtitle: '32 tipos para organizar información sobre tu ser querido',
                search: 'Buscar tipos...',
                totalTypes: 'Total de Tipos',
                filled: 'Llenos',
                totalRecords: 'Total de Registros',
                storageSize: 'Tamaño de Datos',
                empty: 'Vacío',
                records: 'registros',
                settings: 'Configuración',
                colorTheme: 'Tema de Color',
                language: 'Idioma',
                darkMode: 'Modo Oscuro',
                resetOrder: 'Restablecer Orden',
                clearData: 'Borrar Datos',
                install: 'Instalar PWA'
            },
            fr: {
                title: '💕 Dossier d\'Amour',
                subtitle: '32 types pour organiser les informations sur votre bien-aimé',
                search: 'Rechercher des types...',
                totalTypes: 'Total des Types',
                filled: 'Remplis',
                totalRecords: 'Total des Enregistrements',
                storageSize: 'Taille des Données',
                empty: 'Vide',
                records: 'enregistrements',
                settings: 'Paramètres',
                colorTheme: 'Thème de Couleur',
                language: 'Langue',
                darkMode: 'Mode Sombre',
                resetOrder: 'Réinitialiser l\'Ordre',
                clearData: 'Effacer les Données',
                install: 'Installer PWA'
            },
            de: {
                title: '💕 Liebes-Dossier',
                subtitle: '32 Typen zur Organisation von Informationen über Ihren Geliebten',
                search: 'Typen suchen...',
                totalTypes: 'Gesamte Typen',
                filled: 'Gefüllt',
                totalRecords: 'Gesamte Aufzeichnungen',
                storageSize: 'Datengröße',
                empty: 'Leer',
                records: 'Aufzeichnungen',
                settings: 'Einstellungen',
                colorTheme: 'Farbthema',
                language: 'Sprache',
                darkMode: 'Dunkler Modus',
                resetOrder: 'Reihenfolge Zurücksetzen',
                clearData: 'Daten Löschen',
                install: 'PWA Installieren'
            }
        };
        
        let currentLang = localStorage.getItem('language') || 'en';
        
        function t(key) {
            return i18n[currentLang][key] || i18n.en[key] || key;
        }
        
        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('language', lang);
            updateUIText();
        }
        
        function updateUIText() {
            const headerTitle = document.querySelector('.header-title');
            if (headerTitle) headerTitle.textContent = t('title').replace('💕 ', '');
            
            const searchInput = document.querySelector('#searchInput');
            if (searchInput) searchInput.placeholder = t('search');
            
            // Update all elements with data-i18n attribute
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                el.textContent = t(key);
            });
            
            // Update placeholders
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                el.placeholder = t(key);
            });
        }
        
        // 1. СПИСОК ВСІХ 32 ТИПІВ
        const TYPES_LIST = [
            // Top-5 Priority
            { id: 'communication-log', icon: '💬', svgIcon: 'icon-chat', title: 'Communication Log PRO', description: 'Voice notes, Analytics, Mood charts', path: './types/enhanced-communication-log.html', priority: true },
            { id: 'finances', icon: '💰', svgIcon: 'icon-dollar', title: 'Finances Together PRO', description: 'Budget, Bills, Savings tracker', path: './types/enhanced-finances.html', priority: true },
            { id: 'relationship-goals', icon: '🎯', svgIcon: 'icon-target', title: 'Relationship Goals PRO', description: 'Achievements, Vision board, Progress', path: './types/enhanced-relationship-goals.html', priority: true },
            { id: 'shopping-list', icon: '🛒', svgIcon: 'icon-cart', title: 'Shopping List PRO', description: 'Barcode scanner, Recipe integration', path: './types/enhanced-shopping-list.html', priority: true },
            { id: 'travel-planner', icon: '✈️', svgIcon: 'icon-plane', title: 'Travel Planner PRO', description: 'Countdown, Weather, Budget breakdown', path: './types/enhanced-travel-planner.html', priority: true },
            
            // Enhanced Types (6-21)
            { id: 'date-ideas', icon: '💡', svgIcon: 'icon-lightbulb', title: 'Date Ideas', description: 'Filters, Seasonal suggestions', path: './types/enhanced-date-ideas.html' },
            { id: 'memory-album', icon: '📸', svgIcon: 'icon-camera', title: 'Memory Album', description: 'Timeline, Photo slideshow', path: './types/enhanced-memory-album.html' },
            { id: 'recipe-book', icon: '🍽️', svgIcon: 'icon-restaurant', title: 'Recipe Book', description: 'Nutrition, Meal planner', path: './types/enhanced-recipe-book.html' },
            { id: 'gift-registry', icon: '🎁', svgIcon: 'icon-gift', title: 'Gift Registry', description: 'Wishlist, Price tracking', path: './types/enhanced-gift-registry.html' },
            { id: 'mood-tracker', icon: '😊', svgIcon: 'icon-mood', title: 'Mood Tracker', description: 'Emotional analytics, Patterns', path: './types/enhanced-mood-tracker.html' },
            { id: 'books-movies', icon: '🎬', svgIcon: 'icon-movie', title: 'Books & Movies', description: 'Watchlist, Ratings, Reviews', path: './types/enhanced-books-movies.html' },
            { id: 'bucket-list', icon: '🪣', svgIcon: 'icon-list', title: 'Bucket List', description: 'Life goals, Adventure tracker', path: './types/enhanced-bucket-list.html' },
            { id: 'event-countdown', icon: '⏰', svgIcon: 'icon-clock', title: 'Event Countdown', description: 'Multi-event timers', path: './types/enhanced-event-countdown.html' },
            { id: 'timeline', icon: '📅', svgIcon: 'icon-timeline', title: 'Timeline', description: 'Interactive journey visualization', path: './types/enhanced-timeline.html' },
            { id: 'smart-checklist', icon: '✅', svgIcon: 'icon-checkbox', title: 'Smart Checklist', description: 'Task manager, Subtasks', path: './types/enhanced-smart-checklist.html' },
            { id: 'progress', icon: '📊', svgIcon: 'icon-progress', title: 'Progress Tracker', description: 'Visual bars, Milestones', path: './types/enhanced-progress.html' },
            { id: 'interactive-map', icon: '🗺️', svgIcon: 'icon-map', title: 'Interactive Map', description: 'Location pins, Travel history', path: './types/enhanced-interactive-map.html' },
            { id: 'smart-date', icon: '📆', svgIcon: 'icon-calendar', title: 'Smart Date', description: 'Date picker, Event planning', path: './types/enhanced-smart-date.html' },
            { id: 'social-links', icon: '🔗', svgIcon: 'icon-link', title: 'Social Links', description: 'Profile links, QR codes', path: './types/enhanced-social-links.html' },
            { id: 'tags', icon: '🏷️', svgIcon: 'icon-tag', title: 'Tags', description: 'Tag management, Categories', path: './types/enhanced-tags.html' },
            { id: 'rating', icon: '⭐', svgIcon: 'icon-star', title: 'Rating System', description: 'Star ratings, Reviews', path: './types/enhanced-rating.html' },
            
            // Basic Types (22-32)
            { id: 'multi-select', icon: '☑️', svgIcon: 'icon-check-square', title: 'Multi-Select', description: 'Checkbox groups, Bulk actions', path: './types/enhanced-multi-select.html' },
            { id: 'currency-manager', icon: '💱', svgIcon: 'icon-currency', title: 'Currency Manager', description: 'Conversion, Exchange rates', path: './types/enhanced-currency-manager.html' },
            { id: 'password-vault', icon: '🔒', svgIcon: 'icon-lock', title: 'Password Vault', description: 'Secure password storage', path: './types/enhanced-password-vault.html' },
            { id: 'rich-text', icon: '📝', svgIcon: 'icon-text', title: 'Rich Text Editor', description: 'Text formatting', path: './types/enhanced-rich-text.html' },
            { id: 'smart-phone', icon: '📞', svgIcon: 'icon-phone', title: 'Smart Phone', description: 'Phone validation', path: './types/enhanced-smart-phone.html' },
            { id: 'smart-email', icon: '📧', svgIcon: 'icon-email', title: 'Smart Email', description: 'Email validation, Contact groups', path: './types/enhanced-smart-email.html' },
            { id: 'smart-time', icon: '🕐', svgIcon: 'icon-time', title: 'Smart Time', description: 'Time picker', path: './types/enhanced-smart-time.html' },
            { id: 'smart-number', icon: '🔢', svgIcon: 'icon-number', title: 'Smart Number', description: 'Number validation', path: './types/enhanced-smart-number.html' },
            { id: 'color-picker', icon: '🎨', svgIcon: 'icon-palette', title: 'Color Picker', description: 'Color selection, Mood board', path: './types/enhanced-color-picker.html' },
            { id: 'document-vault', icon: '📄', svgIcon: 'icon-document', title: 'Document Vault', description: 'File upload, Document storage', path: './types/enhanced-document-vault.html' },
            { id: 'image-gallery', icon: '🖼️', svgIcon: 'icon-image', title: 'Image Gallery', description: 'Photo gallery, Image viewer', path: './types/enhanced-image-gallery.html' }
        ];
        
        // 2. РЕНДЕРИНГ ТИПІВ
        let customOrder = JSON.parse(localStorage.getItem('typesOrder') || '[]');
        let isEditMode = false;
        
        function getOrderedTypes() {
            if (customOrder.length === 0) return TYPES_LIST;
            
            const ordered = [];
            customOrder.forEach(id => {
                const type = TYPES_LIST.find(t => t.id === id);
                if (type) ordered.push(type);
            });
            
            // Додати нові типи, яких немає в збереженому порядку
            TYPES_LIST.forEach(type => {
                if (!customOrder.includes(type.id)) {
                    ordered.push(type);
                }
            });
            
            return ordered;
        }
        
        function showSkeletonLoader() {
            const grid = document.getElementById('typesGrid');
            // Show more skeleton cards to match actual count
            const skeletonCount = window.innerWidth < 768 ? 6 : 12;
            grid.innerHTML = Array(skeletonCount).fill(0).map(() => `
                <div class="skeleton-card">
                    <div class="skeleton skeleton-icon"></div>
                    <div class="skeleton skeleton-title"></div>
                    <div class="skeleton skeleton-description"></div>
                    <div class="skeleton skeleton-description"></div>
                    <div class="skeleton skeleton-footer"></div>
                </div>
            `).join('');
        }
        
        function renderTypesGrid(types = null) {
            const typesToRender = types || getOrderedTypes();
            const grid = document.getElementById('typesGrid');
            
            grid.innerHTML = typesToRender.map((type, index) => {
                // Вибір іконки: SVG якщо доступна, інакше емодзі
                const iconHtml = type.svgIcon 
                    ? `<svg class="type-icon-svg" width="48" height="48">
                           <use href="#${type.svgIcon}"/>
                       </svg>`
                    : `<div class="type-icon">${type.icon}</div>`;
                
                return `
                    <div class="type-card" data-type-id="${type.id}" data-index="${index}" 
                         draggable="${isEditMode}" 
                         data-path="${type.path || ''}">
                        ${isEditMode ? '<div class="drag-handle"><svg width="20" height="20"><use href="#icon-edit"/></svg></div>' : ''}
                        ${type.priority ? '<span class="type-badge priority"><svg width="14" height="14" style="vertical-align: text-top; display: inline-block; margin-right: 4px;"><use href="#icon-bolt"/></svg>Priority</span>' : '<span class="type-badge">Enhanced</span>'}
                        ${iconHtml}
                        <h3 class="type-title">${type.title}</h3>
                        <p class="type-description">${type.description}</p>
                        <div class="type-footer">
                            <span class="type-status" id="status-${type.id}">${t('empty')}</span>
                            ${!isEditMode ? '<svg width="16" height="16" style="color: var(--primary);"><use href="#icon-arrow-right"/></svg>' : ''}
                        </div>
                    </div>
                `;
            }).join('');
            
            // Add click listeners to cards
            if (!isEditMode) {
                document.querySelectorAll('.type-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const typeId = card.getAttribute('data-type-id');
                        openType(typeId);
                    });
                });
            }
            
            if (isEditMode) {
                setupDragAndDrop();
            }
        }
        
        // 3. ВІДКРИТТЯ ТИПУ
        function openType(typeId) {
            const type = TYPES_LIST.find(t => t.id === typeId);
            if (type && type.path) {
                window.open(type.path, '_blank');
            } else {
                showNotification(t('comingSoon'), `${typeId} ${t('willBeIntegrated')}`, 'warning');
            }
        }
        
        // 4. ПОШУК з debounce + фільтрами
        let searchDebounce = null;
        let currentFilter = 'all';
        let currentSort = 'default';
        
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchClear = document.getElementById('searchClear');
            const filterType = document.getElementById('filterType');
            const sortBy = document.getElementById('sortBy');
            
            // Search with debounce (performance)
            searchInput.addEventListener('input', (e) => {
                const query = e.target.value.trim();
                
                // Show/hide clear button
                searchClear.style.display = query ? 'block' : 'none';
                
                // Debounce search (300ms)
                clearTimeout(searchDebounce);
                searchDebounce = setTimeout(() => {
                    applyFiltersAndSearch();
                }, 300);
            });
            
            // Clear button
            searchClear.addEventListener('click', () => {
                searchInput.value = '';
                searchClear.style.display = 'none';
                applyFiltersAndSearch();
            });
            
            // Filter change
            filterType.addEventListener('change', (e) => {
                currentFilter = e.target.value;
                applyFiltersAndSearch();
            });
            
            // Sort change
            sortBy.addEventListener('change', (e) => {
                currentSort = e.target.value;
                applyFiltersAndSearch();
            });
        }
        
        function applyFiltersAndSearch() {
            const searchQuery = document.getElementById('searchInput').value.toLowerCase().trim();
            
            // 1. Search filter
            let filtered = TYPES_LIST.filter(type => 
                type.title.toLowerCase().includes(searchQuery) ||
                type.description.toLowerCase().includes(searchQuery)
            );
            
            // 2. Type filter
            if (currentFilter === 'priority') {
                filtered = filtered.filter(type => type.priority);
            } else if (currentFilter === 'enhanced') {
                filtered = filtered.filter(type => !type.priority);
            } else if (currentFilter === 'filled') {
                filtered = filtered.filter(type => hasData(type.id));
            } else if (currentFilter === 'empty') {
                filtered = filtered.filter(type => !hasData(type.id));
            }
            
            // 3. Sort
            if (currentSort === 'name') {
                filtered.sort((a, b) => a.title.localeCompare(b.title));
            } else if (currentSort === 'records') {
                filtered.sort((a, b) => getRecordCount(b.id) - getRecordCount(a.id));
            } else if (currentSort === 'lastUsed') {
                filtered.sort((a, b) => {
                    const lastA = getLastUsed(a.id);
                    const lastB = getLastUsed(b.id);
                    return lastB - lastA;
                });
            }
            
            // 4. Render
            if (filtered.length === 0) {
                showEmptyState(searchQuery);
            } else {
                renderTypesGrid(filtered);
            }
        }
        
        function hasData(typeId) {
            const storageKey = `loveDossier_${typeId.replace(/-/g, '_')}`;
            const data = localStorage.getItem(storageKey);
            return data && JSON.parse(data).length > 0;
        }
        
        function getRecordCount(typeId) {
            const storageKey = `loveDossier_${typeId.replace(/-/g, '_')}`;
            const data = localStorage.getItem(storageKey);
            if (!data) return 0;
            try {
                const parsed = JSON.parse(data);
                return Array.isArray(parsed) ? parsed.length : 0;
            } catch {
                return 0;
            }
        }
        
        function getLastUsed(typeId) {
            const key = `lastUsed_${typeId}`;
            return parseInt(localStorage.getItem(key) || '0');
        }
        
        function showEmptyState(query) {
            const grid = document.getElementById('typesGrid');
            const message = query 
                ? `${t('noResults')} "${query}"`
                : t('noMatches');
            
            grid.innerHTML = `
                <div class="empty-state" style="grid-column: 1/-1;">
                    <div class="empty-state-icon">
                        <svg width="80" height="80" style="color: var(--text-secondary); opacity: 0.5;">
                            <use href="#icon-search"/>
                        </svg>
                    </div>
                    <h3 class="empty-state-title">${message}</h3>
                    <p class="empty-state-description">
                        ${t('tryAdjusting')}
                    </p>
                    <button class="empty-state-action" id="resetFiltersBtn">
                        <svg width="18" height="18" style="margin-right: 6px;"><use href="#icon-undo"/></svg>
                        ${t('resetFilters')}
                    </button>
                </div>
            `;
        }
        
        window.resetFilters = function() {
            document.getElementById('searchInput').value = '';
            document.getElementById('searchClear').style.display = 'none';
            document.getElementById('filterType').value = 'all';
            document.getElementById('sortBy').value = 'default';
            currentFilter = 'all';
            currentSort = 'default';
            renderTypesGrid();
        };
        
        // 5. СТАТИСТИКА
        function updateStats() {
            let totalRecords = 0;
            let filledTypes = 0;
            
            // Перебираємо всі ключі LocalStorage
            TYPES_LIST.forEach(type => {
                const storageKey = `loveDossier_${type.id.replace(/-/g, '_')}`;
                const data = localStorage.getItem(storageKey);
                
                if (data) {
                    try {
                        const parsed = JSON.parse(data);
                        const count = Array.isArray(parsed) ? parsed.length : 
                                     (parsed.items && Array.isArray(parsed.items)) ? parsed.items.length :
                                     (parsed.messages && Array.isArray(parsed.messages)) ? parsed.messages.length :
                                     (parsed.transactions && Array.isArray(parsed.transactions)) ? parsed.transactions.length : 0;
                        
                        if (count > 0) {
                            totalRecords += count;
                            filledTypes++;
                            
                            // Оновлюємо статус картки
                            const statusEl = document.getElementById(`status-${type.id}`);
                            if (statusEl) {
                                statusEl.textContent = `${count} ${t('records')}`;
                                statusEl.classList.add('has-data');
                            }
                        }
                    } catch (e) {
                        log('Parse error for', storageKey);
                    }
                }
            });
            
            // Розмір LocalStorage
            let storageSize = 0;
            for (let key in localStorage) {
                if (localStorage.hasOwnProperty(key)) {
                    storageSize += localStorage[key].length + key.length;
                }
            }
            storageSize = (storageSize / 1024).toFixed(1); // KB
            
            // Оновлюємо UI
            const filledEl = document.getElementById('filledTypes');
            const recordsEl = document.getElementById('totalRecords');
            const sizeEl = document.getElementById('storageSize');
            
            if (filledEl) filledEl.textContent = filledTypes;
            if (recordsEl) recordsEl.textContent = totalRecords;
            if (sizeEl) sizeEl.textContent = storageSize + ' KB';
        }
        
        // 6. THEME TOGGLE
        function setupTheme() {
            const themeToggle = document.getElementById('themeToggle');
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggle.innerHTML = '<svg width="20" height="20"><use href="#icon-sun"/></svg>';
            }
            
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                if (newTheme === 'dark') {
                    document.documentElement.setAttribute('data-theme', 'dark');
                } else {
                    document.documentElement.removeAttribute('data-theme');
                }
                localStorage.setItem('theme', newTheme);
                
                themeToggle.innerHTML = newTheme === 'dark' 
                    ? '<svg width="20" height="20"><use href="#icon-sun"/></svg>' 
                    : '<svg width="20" height="20"><use href="#icon-moon"/></svg>';
            });
        }
        
        // 7. PWA INSTALL
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            const installBtn = document.getElementById('installBtn');
            const installBanner = document.getElementById('installBanner');
            
            installBtn.style.display = 'flex';
            
            setTimeout(() => {
                installBanner.classList.add('show');
            }, 3000);
        });
        
        function setupPWAInstall() {
            const installBtn = document.getElementById('installBtn');
            const installBannerBtn = document.getElementById('installBannerBtn');
            const installBanner = document.getElementById('installBanner');
            
            [installBtn, installBannerBtn].forEach(btn => {
                btn.addEventListener('click', async () => {
                    if (!deferredPrompt) return;
                    
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    
                    log(`PWA install: ${outcome}`);
                    
                    deferredPrompt = null;
                    installBtn.style.display = 'none';
                    installBanner.classList.remove('show');
                });
            });
        }
        
        // 8. SERVICE WORKER
        if ('serviceWorker' in navigator && window.location.protocol !== 'file:') {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => log('✅ Service Worker registered'))
                    .catch(err => error('❌ SW registration failed:', err));
            });
        }
        
        // 9. COLOR THEMES
        function setupColorThemes() {
            const savedTheme = localStorage.getItem('colorTheme') || 'purple';
            document.documentElement.setAttribute('data-color-theme', savedTheme);
            
            document.querySelectorAll('.theme-option').forEach(option => {
                const theme = option.getAttribute('data-theme');
                if (theme === savedTheme) {
                    option.classList.add('active');
                }
                
                option.addEventListener('click', () => {
                    document.querySelectorAll('.theme-option').forEach(o => o.classList.remove('active'));
                    option.classList.add('active');
                    
                    document.documentElement.setAttribute('data-color-theme', theme);
                    localStorage.setItem('colorTheme', theme);
                });
            });
        }
        
        // 10. SETTINGS MODAL
        function openSettings() {
            document.getElementById('settingsModal').classList.add('show');
            setupColorThemes();
            
            // Set current language
            document.getElementById('languageSelect').value = currentLang;
        }
        
        window.closeSettings = function() {
            document.getElementById('settingsModal').classList.remove('show');
        };
        
        window.toggleTheme = function() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            if (newTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
            } else {
                document.documentElement.removeAttribute('data-theme');
            }
            localStorage.setItem('theme', newTheme);
            
            const themeToggle = document.getElementById('themeToggle');
            themeToggle.innerHTML = newTheme === 'dark' 
                ? '<svg width="20" height="20"><use href="#icon-sun"/></svg>' 
                : '<svg width="20" height="20"><use href="#icon-moon"/></svg>';
        };
        
        window.resetCardOrder = async function() {
            const confirmed = await showConfirm(
                t('resetOrderTitle'),
                t('resetOrderMessage'),
                'reset'
            );
            
            if (confirmed) {
                localStorage.removeItem('typesOrder');
                customOrder = [];
                renderTypesGrid();
                showNotification(t('success'), t('cardOrderReset'), 'success');
            }
        };
        
        window.clearAllData = async function() {
            const confirmed1 = await showConfirm(
                t('clearDataTitle'),
                t('clearDataMessage'),
                'trash'
            );
            
            if (confirmed1) {
                const confirmed2 = await showConfirm(
                    t('finalConfirmTitle'),
                    t('finalConfirmMessage'),
                    'warning'
                );
                
                if (confirmed2) {
                    localStorage.clear();
                    showNotification(t('success'), t('dataCleared'), 'success');
                    setTimeout(() => location.reload(), 1500);
                }
            }
        };
        
        // 15. EXPORT/IMPORT DATA
        window.exportAllData = function() {
            const exportData = {
                version: '3.0.0',
                exportDate: new Date().toISOString(),
                data: {}
            };
            
            // Collect all data from localStorage
            for (let key in localStorage) {
                if (localStorage.hasOwnProperty(key)) {
                    exportData.data[key] = localStorage[key];
                }
            }
            
            // Create JSON file
            const dataStr = JSON.stringify(exportData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            // Download
            const a = document.createElement('a');
            a.href = url;
            a.download = `love-dossier-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            // Update last backup timestamp
            localStorage.setItem('lastBackup', Date.now().toString());
            
            showNotification(t('success'), t('dataExported'), 'success');
        };
        
        window.importDataPrompt = function() {
            document.getElementById('importFileInput').click();
        };
        
        window.importDataFile = async function(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            showNotification(t('info'), t('loadingFile'), 'info');
            
            const reader = new FileReader();
            reader.onload = async function(e) {
                try {
                    const importData = JSON.parse(e.target.result);
                    
                    if (!importData.version || !importData.data) {
                        throw new Error('Invalid file format');
                    }
                    
                    const confirmed = await showConfirm(
                        t('importDataTitle'),
                        t('importDataMessage'),
                        'import'
                    );
                    
                    if (confirmed) {
                        // Clear current data
                        localStorage.clear();
                        
                        // Import new data
                        for (let key in importData.data) {
                            localStorage.setItem(key, importData.data[key]);
                        }
                        
                        showNotification(t('success'), t('dataImported'), 'success');
                        setTimeout(() => location.reload(), 1500);
                    }
                } catch (error) {
                    showNotification(t('error'), t('invalidBackup'), 'error');
                }
            };
            reader.readAsText(file);
        };
        
        // 16. MODAL HELPERS (замість alert/confirm/prompt)
        function showConfirm(title, message, icon = 'warning') {
            return new Promise((resolve) => {
                const modal = document.getElementById('confirmModal');
                const titleEl = document.getElementById('confirmTitle');
                const messageEl = document.getElementById('confirmMessage');
                const iconEl = document.getElementById('confirmIcon');
                const okBtn = document.getElementById('confirmOkBtn');
                const cancelBtn = document.getElementById('confirmCancelBtn');
                
                // Icon mapping
                const iconMap = {
                    'warning': 'icon-warning',
                    'danger': 'icon-error',
                    'info': 'icon-info',
                    'success': 'icon-success',
                    'import': 'icon-upload',
                    'export': 'icon-download',
                    'reset': 'icon-refresh',
                    'lock': 'icon-lock',
                    'trash': 'icon-trash'
                };
                
                titleEl.textContent = title;
                messageEl.textContent = message;
                iconEl.innerHTML = `<svg width="48" height="48"><use href="#${iconMap[icon] || 'icon-warning'}"/></svg>`;
                
                modal.classList.add('show');
                
                function handleEsc(e) {
                    if (e.key === 'Escape') {
                        cleanup();
                        resolve(false);
                    }
                }
                
                function cleanup() {
                    modal.classList.remove('show');
                    okBtn.removeEventListener('click', handleOk);
                    cancelBtn.removeEventListener('click', handleCancel);
                    document.removeEventListener('keydown', handleEsc);
                }
                
                function handleOk() {
                    cleanup();
                    resolve(true);
                }
                
                function handleCancel() {
                    cleanup();
                    resolve(false);
                }
                
                okBtn.addEventListener('click', handleOk);
                cancelBtn.addEventListener('click', handleCancel);
                document.addEventListener('keydown', handleEsc);
            });
        }
        
        function showInput(title, placeholder = '', defaultValue = '', type = 'text') {
            return new Promise((resolve) => {
                const modal = document.getElementById('inputModal');
                const titleEl = document.getElementById('inputModalTitle');
                const input = document.getElementById('inputModalInput');
                const okBtn = document.getElementById('inputModalOkBtn');
                const cancelBtn = document.getElementById('inputModalCancelBtn');
                
                titleEl.textContent = title;
                input.placeholder = placeholder;
                input.value = defaultValue;
                input.type = type;
                
                modal.classList.add('show');
                setTimeout(() => input.focus(), 100);
                
                function handleEsc(e) {
                    if (e.key === 'Escape') {
                        cleanup();
                        resolve(null);
                    }
                }
                
                function cleanup() {
                    modal.classList.remove('show');
                    okBtn.removeEventListener('click', handleOk);
                    cancelBtn.removeEventListener('click', handleCancel);
                    input.removeEventListener('keydown', handleEnter);
                    document.removeEventListener('keydown', handleEsc);
                }
                
                function handleOk() {
                    cleanup();
                    resolve(input.value);
                }
                
                function handleCancel() {
                    cleanup();
                    resolve(null);
                }
                
                function handleEnter(e) {
                    if (e.key === 'Enter') {
                        handleOk();
                    }
                }
                
                okBtn.addEventListener('click', handleOk);
                cancelBtn.addEventListener('click', handleCancel);
                input.addEventListener('keydown', handleEnter);
                document.addEventListener('keydown', handleEsc);
            });
        }
        
        // 17. NOTIFICATIONS
        function showNotification(title, message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = 'notification-toast';
            
            const iconMap = {
                'success': 'icon-success',
                'error': 'icon-error',
                'warning': 'icon-warning',
                'info': 'icon-info'
            };
            const iconId = iconMap[type] || 'icon-info';
            
            notification.innerHTML = `
                <div class="notification-icon">
                    <svg width="24" height="24"><use href="#${iconId}"/></svg>
                </div>
                <div class="notification-content">
                    <div class="notification-title">${title}</div>
                    <div class="notification-message">${message}</div>
                </div>
                <button class="notification-close" data-close-notification>
                    <svg width="18" height="18"><use href="#icon-close"/></svg>
                </button>
            `;
            
            document.body.appendChild(notification);
            
            // Close button listener
            const closeBtn = notification.querySelector('[data-close-notification]');
            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    notification.style.opacity = '0';
                    setTimeout(() => notification.remove(), 300);
                });
            }
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 300);
            }, 5000);
        }
        
        // 18. CHECK FOR REMINDERS
        function checkReminders() {
            const lastVisit = localStorage.getItem('lastVisit');
            const now = Date.now();
            const daysSinceVisit = lastVisit ? (now - parseInt(lastVisit)) / (1000 * 60 * 60 * 24) : 0;
            
            // Backup reminder every 30 days
            const lastBackup = localStorage.getItem('lastBackup');
            const daysSinceBackup = lastBackup ? (now - parseInt(lastBackup)) / (1000 * 60 * 60 * 24) : 999;
            
            if (daysSinceBackup > 30) {
                setTimeout(() => {
                    showNotification(
                        t('backupReminder'),
                        t('backupReminderMessage'),
                        'warning'
                    );
                }, 3000);
            }
            
            // Welcome back message
            if (daysSinceVisit > 7) {
                setTimeout(() => {
                    showNotification(
                        t('welcomeBack'),
                        t('welcomeBackMessage'),
                        'info'
                    );
                }, 2000);
            }
            
            // Update last visit
            localStorage.setItem('lastVisit', now.toString());
        }
        
        // 19. DEEP LINKING (URL params)
        function handleDeepLinking() {
            const params = new URLSearchParams(window.location.search);
            
            // ?lang=es - change language
            if (params.has('lang')) {
                const lang = params.get('lang');
                if (i18n[lang]) {
                    setLanguage(lang);
                }
            }
            
            // ?theme=ocean - change color theme
            if (params.has('theme')) {
                const theme = params.get('theme');
                const validThemes = ['purple', 'pink', 'ocean', 'sunset', 'forest', 'romantic', 'mint', 'lavender', 'gold'];
                if (validThemes.includes(theme)) {
                    document.documentElement.setAttribute('data-color-theme', theme);
                    localStorage.setItem('colorTheme', theme);
                }
            }
            
            // ?dark=true - enable dark mode
            if (params.has('dark')) {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
            }
            
            // ?type=communication-log - scroll to specific type
            if (params.has('type')) {
                const typeId = params.get('type');
                setTimeout(() => {
                    const card = document.querySelector(`[data-type-id="${typeId}"]`);
                    if (card) {
                        card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        card.style.animation = 'pulse 1s ease 3';
                    }
                }, 500);
            }
        }
        
        // 20. SOCIAL SHARING
        window.shareToTwitter = function() {
            const text = 'Check out Love Dossier - 32 types to organize everything about your loved one! 💕';
            const url = window.location.origin + window.location.pathname;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        };
        
        window.shareToFacebook = function() {
            const url = window.location.origin + window.location.pathname;
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
        };
        
        window.shareViaWebShare = async function() {
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: 'Love Dossier',
                        text: '32 types to organize everything about your loved one! 💕',
                        url: window.location.href
                    });
                    showNotification(t('success'), t('sharedSuccess'), 'success');
                } catch (err) {
                    log('Share cancelled');
                }
            } else {
                // Fallback: copy link
                navigator.clipboard.writeText(window.location.href);
                showNotification(t('success'), t('linkCopied'), 'success');
            }
        };
        
        // 21. EXPORT TO PDF
        window.exportToPDF = function() {
            showNotification(t('info'), t('pdfWait'), 'info');
            
            // Simple PDF export (text-based)
            setTimeout(() => {
                let pdfContent = 'LOVE DOSSIER - DATA SUMMARY\n\n';
                pdfContent += `Generated: ${new Date().toLocaleDateString()}\n\n`;
                
                TYPES_LIST.forEach(type => {
                    const count = getRecordCount(type.id);
                    if (count > 0) {
                        pdfContent += `${type.icon} ${type.title}: ${count} records\n`;
                    }
                });
                
                const blob = new Blob([pdfContent], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `love-dossier-summary-${new Date().toISOString().split('T')[0]}.txt`;
                a.click();
                URL.revokeObjectURL(url);
                
                showNotification(t('success'), t('summaryExported'), 'success');
            }, 500);
        };
        
        // 22. PASSWORD PROTECTION
        async function checkPassword() {
            const savedPassword = localStorage.getItem('appPassword');
            if (savedPassword) {
                const entered = await showInput(t('passwordRequiredTitle'), t('passwordRequiredPlaceholder'), '', 'password');
                if (entered !== savedPassword) {
                    showNotification(t('error'), t('incorrectPassword'), 'error');
                    setTimeout(() => {
                        window.location.href = 'about:blank';
                    }, 1000);
                    return false;
                }
            }
            return true;
        }
        
        window.setupPassword = async function() {
            const password = await showInput(t('setPasswordTitle'), t('setPasswordPlaceholder'), '', 'password');
            if (!password || password.length < 4) {
                showNotification(t('error'), t('passwordTooShort'), 'error');
                return;
            }
            
            const confirmPass = await showInput(t('confirmPasswordTitle'), t('confirmPasswordPlaceholder'), '', 'password');
            if (password !== confirmPass) {
                showNotification(t('error'), t('passwordsDontMatch'), 'error');
                return;
            }
            
            localStorage.setItem('appPassword', password);
            updatePasswordStatus();
            showNotification(t('success'), t('passwordEnabled'), 'success');
        };
        
        window.removePassword = async function() {
            const current = await showInput(t('removePasswordTitle'), t('removePasswordPlaceholder'), '', 'password');
            const saved = localStorage.getItem('appPassword');
            
            if (current === saved) {
                localStorage.removeItem('appPassword');
                updatePasswordStatus();
                showNotification(t('success'), t('passwordRemoved'), 'success');
            } else {
                showNotification(t('error'), t('incorrectPassword'), 'error');
            }
        };
        
        function updatePasswordStatus() {
            const hasPassword = localStorage.getItem('appPassword');
            const statusEl = document.getElementById('passwordEnabled');
            const removeBtn = document.getElementById('removePasswordBtn');
            
            if (statusEl) {
                statusEl.textContent = hasPassword ? t('protected') : t('notProtected');
                statusEl.style.color = hasPassword ? 'var(--success)' : 'var(--text-secondary)';
            }
            
            if (removeBtn) {
                removeBtn.style.display = hasPassword ? 'inline-flex' : 'none';
            }
        }
        
        // 23. DRAG & DROP
        let draggedElement = null;
        
        function setupDragAndDrop() {
            const cards = document.querySelectorAll('.type-card');
            
            cards.forEach(card => {
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragover', handleDragOver);
                card.addEventListener('drop', handleDrop);
                card.addEventListener('dragend', handleDragEnd);
                card.addEventListener('dragenter', handleDragEnter);
                card.addEventListener('dragleave', handleDragLeave);
            });
        }
        
        function handleDragStart(e) {
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }
        
        function handleDragOver(e) {
            if (e.preventDefault) e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            return false;
        }
        
        function handleDragEnter(e) {
            if (this !== draggedElement) {
                this.classList.add('drag-over');
            }
        }
        
        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }
        
        function handleDrop(e) {
            if (e.stopPropagation) e.stopPropagation();
            
            if (draggedElement !== this) {
                const draggedId = draggedElement.getAttribute('data-type-id');
                const targetId = this.getAttribute('data-type-id');
                
                // Swap positions
                const types = getOrderedTypes();
                const draggedIndex = types.findIndex(t => t.id === draggedId);
                const targetIndex = types.findIndex(t => t.id === targetId);
                
                [types[draggedIndex], types[targetIndex]] = [types[targetIndex], types[draggedIndex]];
                
                // Save new order
                customOrder = types.map(t => t.id);
                localStorage.setItem('typesOrder', JSON.stringify(customOrder));
                
                renderTypesGrid();
            }
            
            this.classList.remove('drag-over');
            return false;
        }
        
        function handleDragEnd(e) {
            this.classList.remove('dragging');
            document.querySelectorAll('.type-card').forEach(card => {
                card.classList.remove('drag-over');
            });
        }
        
        // 24. EDIT MODE
        function enterEditMode() {
            isEditMode = true;
            document.getElementById('editModeBanner').classList.add('show');
            renderTypesGrid();
        }
        
        window.exitEditMode = function() {
            isEditMode = false;
            document.getElementById('editModeBanner').classList.remove('show');
            renderTypesGrid();
        };
        
        // 25. LANGUAGE CHANGE
        function setupLanguageSelect() {
            const select = document.getElementById('languageSelect');
            select.addEventListener('change', (e) => {
                setLanguage(e.target.value);
                renderTypesGrid(); // Re-render з новим текстом
            });
        }
        
        // 26. ІНІЦІАЛІЗАЦІЯ
        function init() {
            // Load saved language
            currentLang = localStorage.getItem('language') || 'en';
            
            renderTypesGrid();
            setupSearch();
            setupTheme();
            setupPWAInstall();
            setupColorThemes();
            setupLanguageSelect();
            updateStats();
            updateUIText();
            checkReminders();
            handleDeepLinking();
            updatePasswordStatus();
            
            // Event listeners
            document.getElementById('settingsBtn').addEventListener('click', openSettings);
            document.getElementById('editModeBtn').addEventListener('click', enterEditMode);
            document.getElementById('exitEditModeBtn').addEventListener('click', exitEditMode);
            document.getElementById('closeSettingsBtn').addEventListener('click', closeSettings);
            document.getElementById('toggleThemeBtn').addEventListener('click', toggleTheme);
            document.getElementById('resetCardOrderBtn').addEventListener('click', resetCardOrder);
            document.getElementById('exportJSONBtn').addEventListener('click', exportAllData);
            document.getElementById('exportPDFBtn').addEventListener('click', exportToPDF);
            document.getElementById('importDataBtn').addEventListener('click', importDataPrompt);
            document.getElementById('shareTwitterBtn').addEventListener('click', shareToTwitter);
            document.getElementById('shareFacebookBtn').addEventListener('click', shareToFacebook);
            document.getElementById('shareWebShareBtn').addEventListener('click', shareViaWebShare);
            document.getElementById('setupPasswordBtn').addEventListener('click', setupPassword);
            document.getElementById('removePasswordBtn').addEventListener('click', removePassword);
            document.getElementById('clearAllDataBtn').addEventListener('click', clearAllData);
            document.getElementById('importFileInput').addEventListener('change', importDataFile);
            
            // Close modal on overlay click
            document.getElementById('settingsModal').addEventListener('click', (e) => {
                if (e.target.id === 'settingsModal') {
                    closeSettings();
                }
            });
            
            // Reset filters button (dynamically created)
            document.addEventListener('click', (e) => {
                if (e.target.id === 'resetFiltersBtn' || e.target.closest('#resetFiltersBtn')) {
                    resetFilters();
                }
            });
            
            // Оновлювати статистику кожні 5 секунд
            setInterval(updateStats, 5000);
            
            log('✅ Love Dossier Main App initialized');
            log('📊 Total types:', TYPES_LIST.length);
            log('🌐 Language:', currentLang);
        }
        
        // ❌ НЕ запускаємо init автоматично - тільки через AppFlow!
        // init() буде викликаний з AppFlow.showMainApp()
    </script>
    
    <!-- SVG Icon Sprite -->
    <svg style="display: none;" aria-hidden="true">
        <defs>
            <!-- Priority Icons -->
            <symbol id="icon-chat" viewBox="0 0 24 24">
                <path fill="currentColor" d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
            </symbol>
            
            <symbol id="icon-dollar" viewBox="0 0 24 24">
                <path fill="currentColor" d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>
            </symbol>
            
            <symbol id="icon-target" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-14c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
            </symbol>
            
            <symbol id="icon-cart" viewBox="0 0 24 24">
                <path fill="currentColor" d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
            </symbol>
            
            <symbol id="icon-plane" viewBox="0 0 24 24">
                <path fill="currentColor" d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/>
            </symbol>
            
            <!-- Enhanced Icons -->
            <symbol id="icon-lightbulb" viewBox="0 0 24 24">
                <path fill="currentColor" d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"/>
            </symbol>
            
            <symbol id="icon-camera" viewBox="0 0 24 24">
                <path fill="currentColor" d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
            </symbol>
            
            <symbol id="icon-restaurant" viewBox="0 0 24 24">
                <path fill="currentColor" d="M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"/>
            </symbol>
            
            <symbol id="icon-gift" viewBox="0 0 24 24">
                <path fill="currentColor" d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/>
            </symbol>
            
            <symbol id="icon-mood" viewBox="0 0 24 24">
                <path fill="currentColor" d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
            </symbol>
            
            <symbol id="icon-movie" viewBox="0 0 24 24">
                <path fill="currentColor" d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"/>
            </symbol>
            
            <symbol id="icon-list" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19 5v14H5V5h14m1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM11 7h6v2h-6V7zm0 4h6v2h-6v-2zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"/>
            </symbol>
            
            <symbol id="icon-clock" viewBox="0 0 24 24">
                <path fill="currentColor" d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
            </symbol>
            
            <symbol id="icon-timeline" viewBox="0 0 24 24">
                <path fill="currentColor" d="M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2z"/>
            </symbol>
            
            <symbol id="icon-checkbox" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </symbol>
            
            <symbol id="icon-progress" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </symbol>
            
            <symbol id="icon-map" viewBox="0 0 24 24">
                <path fill="currentColor" d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"/>
            </symbol>
            
            <symbol id="icon-calendar" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
            </symbol>
            
            <symbol id="icon-link" viewBox="0 0 24 24">
                <path fill="currentColor" d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
            </symbol>
            
            <symbol id="icon-tag" viewBox="0 0 24 24">
                <path fill="currentColor" d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"/>
            </symbol>
            
            <symbol id="icon-star" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
            </symbol>
            
            <!-- Basic Icons -->
            <symbol id="icon-check-square" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </symbol>
            
            <symbol id="icon-currency" viewBox="0 0 24 24">
                <path fill="currentColor" d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>
            </symbol>
            
            <symbol id="icon-lock" viewBox="0 0 24 24">
                <path fill="currentColor" d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
            </symbol>
            
            <symbol id="icon-text" viewBox="0 0 24 24">
                <path fill="currentColor" d="M5 4v3h5.5v12h3V7H19V4z"/>
            </symbol>
            
            <symbol id="icon-phone" viewBox="0 0 24 24">
                <path fill="currentColor" d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
            </symbol>
            
            <symbol id="icon-email" viewBox="0 0 24 24">
                <path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
            </symbol>
            
            <symbol id="icon-time" viewBox="0 0 24 24">
                <path fill="currentColor" d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
            </symbol>
            
            <symbol id="icon-number" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
            </symbol>
            
            <symbol id="icon-palette" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
            </symbol>
            
            <symbol id="icon-document" viewBox="0 0 24 24">
                <path fill="currentColor" d="M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"/>
            </symbol>
            
            <symbol id="icon-image" viewBox="0 0 24 24">
                <path fill="currentColor" d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
            </symbol>
            
            <!-- UI Icons -->
            <symbol id="icon-heart" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </symbol>
            
            <symbol id="icon-warning" viewBox="0 0 24 24">
                <path fill="currentColor" d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
            </symbol>
            
            <symbol id="icon-info" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
            </symbol>
            
            <symbol id="icon-success" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </symbol>
            
            <symbol id="icon-error" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/>
            </symbol>
            
            <symbol id="icon-search" viewBox="0 0 24 24">
                <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            </symbol>
            
            <symbol id="icon-settings" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
            </symbol>
            
            <symbol id="icon-edit" viewBox="0 0 24 24">
                <path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
            </symbol>
            
            <symbol id="icon-moon" viewBox="0 0 24 24">
                <path fill="currentColor" d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2z"/>
            </symbol>
            
            <symbol id="icon-sun" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>
            </symbol>
            
            <symbol id="icon-download" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"/>
            </symbol>
            
            <symbol id="icon-upload" viewBox="0 0 24 24">
                <path fill="currentColor" d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
            </symbol>
            
            <symbol id="icon-trash" viewBox="0 0 24 24">
                <path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
            </symbol>
            
            <symbol id="icon-refresh" viewBox="0 0 24 24">
                <path fill="currentColor" d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
            </symbol>
            
            <symbol id="icon-share" viewBox="0 0 24 24">
                <path fill="currentColor" d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
            </symbol>
            
            <symbol id="icon-close" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </symbol>
            
            <symbol id="icon-check" viewBox="0 0 24 24">
                <path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </symbol>
            
            <symbol id="icon-arrow-right" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
            </symbol>
            
            <symbol id="icon-undo" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/>
            </symbol>
            
            <symbol id="icon-rocket" viewBox="0 0 24 24">
                <path fill="currentColor" d="M9.19 6.35c-2.04 2.29-3.44 5.58-3.57 5.89L2 10.69l4.05-4.05c.47-.47 1.15-.68 1.81-.55l1.33 1.26zM11.17 17s3.74-1.55 5.89-3.7c5.4-5.4 4.5-9.62 4.21-10.57-.95-.3-5.17-1.19-10.57 4.21C8.55 9.09 7 12.83 7 12.83L11.17 17zm6.48-2.19c-2.29 2.04-5.58 3.44-5.89 3.57L13.31 22l4.05-4.05c.47-.47.68-1.15.55-1.81l-1.26-1.33zM9 18c0 .83-.34 1.58-.88 2.12C6.94 21.34 2 22 2 22s.66-4.94 1.88-6.12C4.42 15.34 5.17 15 6 15c1.66 0 3 1.34 3 3zm4-9c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"/>
            </symbol>
            
            <symbol id="icon-bolt" viewBox="0 0 24 24">
                <path fill="currentColor" d="M7 2v11h3v9l7-12h-4l4-8z"/>
            </symbol>
            
            <symbol id="icon-shield" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
            </symbol>
            
            <symbol id="icon-wifi-off" viewBox="0 0 24 24">
                <path fill="currentColor" d="M23.64 7c-.45-.34-4.93-4-11.64-4-1.5 0-2.89.19-4.15.48L18.18 13.8 23.64 7zm-6.6 8.22L3.27 1.44 2 2.72l2.05 2.06C1.91 5.76.59 6.82.36 7l11.63 14.49.01.01.01-.01 3.9-4.86 3.32 3.32 1.27-1.27-3.46-3.46z"/>
            </symbol>
            
            <symbol id="icon-pdf" viewBox="0 0 24 24">
                <path fill="currentColor" d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z"/>
            </symbol>
            
            <symbol id="icon-twitter" viewBox="0 0 24 24">
                <path fill="currentColor" d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
            </symbol>
            
            <symbol id="icon-facebook" viewBox="0 0 24 24">
                <path fill="currentColor" d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"/>
            </symbol>
            
            <symbol id="icon-unlock" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"/>
            </symbol>
            
            <symbol id="icon-contrast" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18V4c4.41 0 8 3.59 8 8s-3.59 8-8 8z"/>
            </symbol>
        </defs>
    </svg>
</body>
</html>
